\documentclass[12pt,a4paper]{scrartcl}

\input{../config/header[fr].sty}

\usepackage[fr]{exercises}

\newenvironment{preamble}[1][]{}{}


\begin{document}

\newcommand\exosoptions{
\IDkey{pts} le nombre de points avec le cas particulier de $0$ qui demande d'afficher "Non noté".

\IDkey{time} la durée de l'exercice.

\IDkey{id} un texte de votre choix pour remplacer le numéro (ceci a pour effet de bloquer temporairement la numérotation).

\IDkey{title} un titre.

\IDkey{about} une petite indication liée à l'exercice (comme par exemple qu'il ne s'adresse qu'aux élèves motivés).

\IDkey{src} la source utilisée pour confectionner l'exercice.
}


\section{Indiquer vos exercices}

    \subsection{Important pour la suite}

Rappelons que tous les exemples utilisés dans cette documentation ont été obtenus en utilisant \verb+\usepackage[fr]{lyxam}+ dans le préambule ce qui charge le style par défaut parmi les différents styles proposés (voir le dossier \verb+examples+ pour choisir un style prédéfini).


    \subsection{Différents types d'exercices}

Voici l'ensemble des commandes disponibles pour indiquer un type d'exercice.

% All kind of level 2 contexts - START
\begin{itemize}
\makeatletter
    \item \verb+\activity+ correspond à "\lyxam@text@activity{}".
    
    \item \verb+\bonus+ correspond à "\lyxam@text@bonus{}".
    
    \item \verb+\exercise+ correspond à "\lyxam@text@exercise{}".
    
    \item \verb+\mcq+ correspond à "\lyxam@text@mcq{}".
    
    \item \verb+\praticalwork+ correspond à "\lyxam@text@praticalwork{}".
    
    \item \verb+\problem+ correspond à "\lyxam@text@problem{}".
\makeatother
\end{itemize}
% All kind of level 2 contexts - END

Dans la suite, nous donnerons des exemples principalement avec la commande \verb+\exercise+. Ceci n'est pas gênant car le principe reste identique pour les autres commandes.


    \subsection{Numérotation minimaliste}

En \textbf{compilant deux fois} au moins, \verb+lyxam+ va pouvoir donner une numérotation minimaliste de vos exercices. Tout d'abord, ci-dessous on obtient classiquement des exercices tous numérotés où vous noterez que chaque type d'exercice admet sa propre numérotation.


\begin{tcblisting}{}
\exercise
\exercise
\problem
\problem
\end{tcblisting}


Que souhaite-t-on avoir dans un sujet ne contenant qu'un seul problème et un seul bonus ? Nul besoin ici d'avoir un numéro pour ces derniers. C'est ce que fait \verb+lyxam+.

\resetallcnt{}

\begin{tcblisting}{}
\exercise
\exercise
\problem
\bonus
\end{tcblisting}



    \subsection{Indiquer le barème}

La commande \verb+\exercise+ dispose de plusieurs options dont l'une permet de donner le nombre de points attribués à un exercice où lorsque l'on indique $0$ point le package indique une exercice non noté (voir la section suivante pour un exemple). Voici comment donner un barème.

\resetallcnt{}

\begin{tcblisting}{}
\exercise[pts = 5]
Bla, bla, bla, bla, bla, ...
\end{tcblisting}


    \subsection{Cacher le texte "Exercice"}

La version étoilée \verb+\exercise*+ permet de cacher le contexte qui du point de vue de \verb+lyxam+ sera ici le texte "Exercice". Ceci est surtout pratique pour les sous-parties présentées un peu plus bas. Dans ce genre de situation, il faut obligatoirement donner un titre.

\begin{tcblisting}{}
\exercise*[title = Juste mon titre]

Bla, bla, bla, bla, bla, ...
\end{tcblisting}


    \subsection{Toutes les options en action}

Les fiches techniques données un peu plus bas expliquent le champs d'utilisation de chaque option.
\textit{\textbf{Attention !} L'environnement} \verb+tcblisting+ \textit{utilisé dans ce document ne montre pas ci-dessous la note de bas page numérotée $\lceil$a$\rfloor$ qui donne la source utilisée.}

\begin{tcblisting}{}
\exercise[pts   = 0,
          time  = 3 jours,
          id    = facultatif,
          title = Devinette,
          about = Pour spécialiste uniquement,
          src   = Le livre des experts]
Bla, bla, bla, bla, bla, ...
\end{tcblisting}


    \subsection{Fiches techniques}

Toutes les options données ci-dessous sont facultatives.

\bigskip


% IDmacro - All kind of level 2 contexts - START
\IDmacro{activity}{6}{}

\IDmacro{bonus}{6}{}

\IDmacro{exercise}{6}{}

\IDmacro{mcq}{6}{}

\IDmacro{praticalwork}{6}{}

\IDmacro{problem}{6}{}
% IDmacro - All kind of level 2 contexts - END

\exosoptions{}



\section{Indiquer des sous-parties dans vos exercices}

    \subsection{Un exemple suffit\dots{} ou presque}

La commande \verb+\subpart+, avec les mêmes options que les commandes de type \verb+\exercice+, sert pour des sous-parties d'un exercice qui seront numérotées relativement aux exercices comme le montre l'exemple suivant.

\resetallcnt{}

\begin{tcblisting}{}
\exercise
\subpart
\subpart

\exercise
\subpart
\subpart
\end{tcblisting}


    \subsection{Fiche technique}

Toutes les options données ci-dessous sont facultatives et identiques à celles vues précédemment.

\bigskip


% IDmacro - All kind of level 3 contexts - START
\IDmacro{subpart}{6}{}
% IDmacro - All kind of level 3 contexts - END

\exosoptions{}



\section{Regrouper vos exercices par thèmes}

    \subsection{Un exemple suffit\dots{} ou presque}

La commande \verb+\topic+, avec les mêmes options que les commandes de type \verb+\exercice+, sert juste à regrouper des exercices par thématiques : fût un temps où dans les brevets du collège, il y avait une partie numérique et une autre géométrique.
Chaque nouvelle utilisation de \verb+\topic+ remet juste à zéro la numérotation des sous-parties mais pas celles des contextes de type \verb+\exercice+.

\resetallcnt{}

\begin{tcblisting}{}
\topic
\exercise
\exercise

\topic
\exercise
\end{tcblisting}


    \subsection{Fiche technique}

Toutes les options données ci-dessous sont facultatives et identiques à celles vues précédemment.

\bigskip


% IDmacro - All kind of level 1 contexts - START
\IDmacro{topic}{6}{}
% IDmacro - All kind of level 1 contexts - END

\exosoptions{}



\section{Personnaliser les numérotations}

    \subsection{Un petit exemple}

En mettant un peu les mains dans le cambouis, on peut modifier à sa guise la numérotation de chaque type d'exercice. Voici un exemple tapé directement dans un fichier \verb+tex+, ce qui impose d'employer \verb+\makeatletter...\makeatother+.

\resetallcnt{}

\begin{tcblisting}{}
\makeatletter
    \renewcommand\lyxam@counter@exercise@style[1]{-- \arabic{#1} --}
\makeatother

\exercise
\exercise
\end{tcblisting}


    \subsection{Fiches techniques}

% IDmacro - All styles for counters - START
\IDmacro{lyxam@counter@activity@style}{0}{1}

\IDmacro{lyxam@counter@bonus@style}{0}{1}

\IDmacro{lyxam@counter@exercise@style}{0}{1}

\IDmacro{lyxam@counter@mcq@style}{0}{1}

\IDmacro{lyxam@counter@praticalwork@style}{0}{1}

\IDmacro{lyxam@counter@problem@style}{0}{1}

\IDmacro{lyxam@counter@subpart@style}{0}{1}

\IDmacro{lyxam@counter@topic@style}{0}{1}
% IDmacro - All styles for counters - END

\IDarg{} the \LaTeX{} counter associated to the context.


\section{Utiliser un préambule}

    \subsection{Un exemple avec toutes les options}

L'environnement \verb+\preamble+ sert à rédiger un ou plusieurs paragraphes en préambule de tout un examen, d'un thème, d'un exercice ou d'une partie.
Il propose deux options : l'une \verb+center+ pour centrer le contenu à l'intérieur du préambule, l'autre \verb+scale = ...+ un coefficient multiplicatif pour la largeur allouée au préambule (ce coefficient est multiplié à \verb+\linewidth+ pour calculer la largeur souhaitée).

\resetallcnt{}

\begin{tcblisting}{}
\begin{preamble}[scale = 0.75, center]
    Cet exercice est indépendant \verb+;-)+. Bla, bla, bla, bla, bla, bla,
    bla, bla, bla, bla, bla, bla, bla, bla, bla, bla, bla, bla, bla,\dots
\end{preamble}

\exercise

\begin{preamble}
    Dans cet exercice, tout trace de recherche sera prise en compte à
    condition de ne pas explorer le Pôle Nord quand on s'intéresse
    au Pôle Sud. Quoique...
\end{preamble}

Trouver ....
\end{tcblisting}


    \subsection{Fiches techniques}

\IDenv{preamble}{2}{}

\IDkey{scale} un nombre, valant $1$ par défaut, qui sera multiplié à la largeur d'une ligne pour obtenir la largeur souhaitée pour le préambule.

\IDkey{center} un booléen, valant \verb+false+ par défaut, pour centrer ou non le contenu du préambule (notez que \verb+center+ est un raccourci de \verb+center = true+).


\end{document}
